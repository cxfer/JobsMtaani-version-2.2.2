<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Google Map â€” Demo</title>
  <style>
    html, body { height: 100%; margin: 0; font-family: Arial, sans-serif; }
    #map { height: calc(100vh - 72px); width: 100%; }
    header { height: 72px; display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: #0b5cff; color: white; }
    .controls { display:flex; gap:8px; align-items:center; }
    input[type="text"]{ padding:8px 10px; border-radius:6px; border:1px solid rgba(0,0,0,0.12); min-width:220px }
    button { padding:8px 10px; border-radius:6px; border:none; cursor:pointer }
    .btn-geo { background:#0d6efd; color:white }
    .btn-reset { background:#e9ecef }
    @media (max-width:560px){ header { flex-direction:column; height:auto; padding:10px } .controls{ width:100%; justify-content:space-between }
      input[type="text"]{ min-width: 120px; flex:1 }
    }
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;gap:12px">
      <h3 style="margin:0">Google Maps demo</h3>
      <small style="opacity:.9">Display map, search places, add marker & geolocate</small>
    </div>

    <div class="controls" style="margin-left:auto">
      <input id="pac-input" type="text" placeholder="Search places or address" aria-label="Search box" />
      <button id="geolocate" class="btn-geo" title="Go to my location">My location</button>
      <button id="reset" class="btn-reset" title="Reset map">Reset</button>
    </div>
  </header>

  <div id="map"></div>

  <script>
    // --- Configuration: API key included below (you supplied it). If you rotate the key, replace the value in the script tag URL. ---

    // Default center (Nairobi) and default zoom
    const DEFAULT_CENTER = { lat: -1.286389, lng: 36.817223 };
    const DEFAULT_ZOOM = 12;

    let map, marker, infoWindow, searchBox;

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: DEFAULT_CENTER,
        zoom: DEFAULT_ZOOM,
        mapTypeControl: true,
        fullscreenControl: true,
      });

      infoWindow = new google.maps.InfoWindow();

      // Marker (single). Click map to move marker and show coords.
      marker = new google.maps.Marker({ map, position: DEFAULT_CENTER, draggable: true });
      marker.addListener('click', () => {
        infoWindow.setContent(`<div><strong>Marker</strong><br>Lat: ${marker.getPosition().lat().toFixed(6)}<br>Lng: ${marker.getPosition().lng().toFixed(6)}</div>`);
        infoWindow.open(map, marker);
      });

      map.addListener('click', (e) => {
        placeMarker(e.latLng);
      });

      // Search box (Places library)
      const input = document.getElementById('pac-input');
      searchBox = new google.maps.places.SearchBox(input);
      map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

      // Bias the SearchBox results towards current map's viewport.
      map.addListener('bounds_changed', () => {
        searchBox.setBounds(map.getBounds());
      });

      searchBox.addListener('places_changed', () => {
        const places = searchBox.getPlaces();
        if (places.length == 0) return;
        const place = places[0];
        if (!place.geometry) return;
        if (place.geometry.location) {
          map.panTo(place.geometry.location);
          map.setZoom(16);
          placeMarker(place.geometry.location);
          infoWindow.setContent(`<div><strong>${place.name || 'Place'}</strong><br>${place.formatted_address || ''}</div>`);
          infoWindow.open(map, marker);
        }
      });

      // Geolocation button
      document.getElementById('geolocate').addEventListener('click', () => {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition((pos) => {
            const p = { lat: pos.coords.latitude, lng: pos.coords.longitude };
            map.panTo(p);
            map.setZoom(15);
            placeMarker(p);
          }, (err) => {
            alert('Could not get your location: ' + (err.message || 'permission denied'));
          });
        } else {
          alert('Geolocation not supported by your browser.');
        }
      });

      // Reset
      document.getElementById('reset').addEventListener('click', () => {
        map.panTo(DEFAULT_CENTER);
        map.setZoom(DEFAULT_ZOOM);
        placeMarker(DEFAULT_CENTER);
        document.getElementById('pac-input').value = '';
      });
    }

    function placeMarker(latLng) {
      marker.setPosition(latLng);
      marker.setMap(map);
    }
  </script>

  <!--
    IMPORTANT: This script tag loads the Google Maps JavaScript API with the Places library.
    Replace the key if you rotate it. Hosting: Google Maps API requires the page to be served via
    http://localhost or https for the browser to allow the API in many cases. Use a simple local server
    like: python -m http.server 8000  (then open http://localhost:8000/google-map.html)

    Provided API key inserted below as requested.
  -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBvi4a-1U7laU5WPcwlPW0a6g5T246wWos&libraries=places&callback=initMap"></script>
</body>
</html>
